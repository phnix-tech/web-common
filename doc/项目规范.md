# 项目规范

_项目基础框架使用[飞冰](https://ice.work/) Vue物料 - Admin Lite模板生成，关于飞冰详细使用可以访问其官网了解更多。_

## 目录
- [目录结构](#目录结构)
- [目录说明](#目录说明)
  - [doc](#doc)
  - [public](#public)
  - [src](#src)
    - [assets](#assets)
    - [components](#components)
    - [config](#config)
    - [layouts](#layouts)
    - [models](#models)
    - [pages](#pages)
    - [services](#services)
    - [stores](#stores)
    - [styles](#styles)
    - [utils](#utils)
- [代码规范](#代码规范)
    - [命名规范](#命名规范)
    - [组件规范](#组件规范)
    - [ESLint](#ESLint)
    - [Stylelint](#Stylelint)
- [结语](#结语)

## 目录结构

项目目录结构基于[飞冰目录结构](https://ice.work/docs/guide/dev/directory-structure)，添加了额外目录规范。

```text
├── public/                        # 静态文件，构建时会 copy 到 `dist/` 目录
│   ├── index.html                 # 应用入口 HTML
│   └── favicon.png                # Favicon
├── src/
|   ├── assets                     # 资源文件目录，如图档、三方库样式、字体等
│   ├── components/                # 可复用的自定义业务组件
│   │   └── Guide/
│   │       ├── index.js
│   │       └── index.module.scss
│   ├── config/                    # 配置信息
│   │   ├── routes.js              # 路由配置
│   │   └── menu.js                # 导航菜单配置
│   ├── layouts/                   # 布局组件
│   │   └── HeaderAsideLayout
|   |       ├── components         # 布局内部组件
│   │       ├── index.js
│   │       └── index.module.scss
│   ├── models/                    # 模型DTO
│   ├── pages/                     # 视图页面
│   │   └── Dashboard/             # Dashboard 页面
│   │       ├── components/        # 页面级自定义业务组件
│   │       ├── Dashboard.vue      # 页面组件
│   │       ├── index.js           # 页面入口
│   │       └── index.module.scss  # css module 样式
│   ├── services/                  # 后端接口交互
│   ├── stores/                    # 状态管理
|   |   ├── modules                # 模块化状态
│   ├── styles/                    # 样式和公共样式函数等
|   |   ├── index.scss             # 全局样式
│   ├── utils/                     # 工具库
│   ├── App.vue                    # 应用顶级组件
│   ├── main.js                    # 应用入口文件
│   └── router.js                  # 路由器实例，依赖 config/routes.js
├── vue.config.js                  # vue工程自定义配置，包含插件配置及自定义 `webpack` 配置等
├── README.md
├── package.json
├── .editorconfig
├── .eslintrc.js
├── .gitignore
└── .stylelintrc.js
```

## 目录说明

### doc

文档目录，比如项目规范说明文档、代码格式检查说明文档等。

### public

静态文件目录，构建时会 copy 到 `dist/` 目录。

### src

源码目录

#### assets

资源文件目录，存放项目所有资源文件，包括图片，视频，音频等。各类资源目录命名为复数命名。

必要时，可以在资源目录下创建某类资源文件子目录。

资源文件与静态文件的区别为，资源文件可以被项目构建处理，比如在js、css中通过相对路径引用资源文件，在项目构建时对资源文件路径添加前缀，文件名hash化等，而静态文件只做复制处理，在js、css中只能通过绝对路径引用静态文件。

示例：

```text
/src
  /assets
    /images
      home_bg@2x.png
      ...
    /audios
      playground.mp3
      ...
    /...
```

#### components

多页面之间可复用公共组件目录，只用于存在复用的且非三方的公共组件。非公共组件应该放在父组件文件夹内。

#### config

配置目录，如环境配置、路由配置、导航菜单配置。

#### layouts

布局组件目录，页面基础布局如Header、Aside、Main、Footer。

#### models

模型DTO目录，模型定义为后端DTO的包装类，包装的目的是为了处理数据，提供方法让组件、状态管理调用，因为后端原始数据为plain对象，没有方法处理数据。有了模型层前后端数据结构可以解耦，前端可以基于原型页面并行定义数据结构，后期前后端结构如果有区别只需要模型类内部修改即可。

#### pages

页面目录，也叫做视图目录，页面的定义为一个完整的需求文件，比如商品列表、商品详情、新增商品分别为三个页面。

通常下，我们会根据功能模块创建子目录来包含页面集合。

示例：
```text
/src
  /pages
    /goods                      商品相关页面
      /List
        /components
        List.vue
        index.js
        index.modules.scss
      /Detail
      /Create
    /Home                       首页
      Home.vue
      index.js
      index.modules.scss
```

#### services

后端接口交互目录，也叫做api目录。定义服务目录主要有以下好处：

- 复用后端接口。
- 封装模型对象，服务层在获取到后端数据后会把它构造为模型对象，对外返回模型对象。
- 组件或者状态管理中使用模型对象，模型对象统一处理数据。
- 修改服务层实现即可mock数据测试。

#### stores

状态管理目录，根据项目复杂度定义`modules`目录模块化管理状态。

示例：

```text
/src
  /stores
    /modules
      user.js       用户
      goods.js      商品
      index.js      导出stores
```

#### styles

样式目录，包括全局样式、样式重置、主题设置、mixin、样式变量等。

示例：

```text
/src
  /styles
    global.scss
    reset.scss
    theme.scss
    functions.scss
    variables.scss
```

#### utils

工具目录，用于存放项目公共函数或者方法，比如时间格式化函数、网络请求包装函数。

## 代码规范

### 命名规范

所有命名应该遵循通用原则：

- 命名要语义化，不要用拼音和错误的单词。

- 名称不易过长，有些名称可以使用通用的简写，例如：background(bg)等。

- 某个目录下文件不要加上目录名作为命名开头。例如Question组件目录下，拆分的文件不要写成QuestionHeader，QuestionBody，应该直接写成Header，Body。

#### 文件夹

所有文件夹采用驼峰命名（Camel-Case）。

- 一个文件夹的内容如果是多个实体，那么命名应该是复数，例如images、videos。如果名称没有复数形式除外，例如common。

- 一个组件如果是文件夹内的index.js导出，那么这个文件夹使用大驼峰命名，即首字母大写。

- 如果一个文件夹包含多个组件，但是并不导出自身，这个文件夹首字母仍然应该是`小写`。

```text
/src
  /assets
    /icons
    /videos
  /pages
    /Dashboard                  文件夹index.js导出，首字母大写
      Dashboard.vue
      index.modules.scss
      index.js
    /goods                      文件夹包含多个组件，本身不导出，首字母小写
        /List
          /components
          List.vue
          index.js
          index.modules.scss
        /Detail
        /Create
```

#### 文件

所有JS文件使用驼峰命名。资源文件使用小写`下划线`命名连接多个单词。

- 组件文件首字母大写。
- 组件文件除index.js外都是首字母大写。
- 模型类文件首字母大写。

其他文件首字母均小写。

示例：

```text
/src
  /assets
    btn_delete.png              资源文件小写`下划线`命名连接多个单词
    icon_add.png
  /pages
    /Dashboard
      Dashboard.vue             组件文件首字母大写
      index.modules.scss
      index.js                  目录index.js导出，小写首字母
  /models
    Goods.js                    商品模型类，首字母大写
  /config
    menu.js                     其他文件首字母均小写
    routes.js
  /services
    login.js
    system.js
```

### 组件规范

参考[组件规范](./组件规范.md)

### 其他约定

- 除了pages/components目录中如果是组件index导出，则目录名为首字母大写，其余统一小写不用任何连接符号。
  
- url path全部小写，不用任何连接符号连接。
  
- import路径导入，向上寻址统一使用@别名从src目录导入，如果是向下寻址统一使用相对路劲。

- package.json依赖统一使用严格版本号。

### ESLint

JavaScript代码格式检查规则参考[ESLint.md](./ESLint.md)

### Stylelint

样式格式检查规则参考[Stylelint.md](./Stylelint.md)

## 结语

此文档旨在让参与项目的同学对项目有一个清晰的认知。希望大家在开发时遵守代码和目录规范，提高代码质量。
